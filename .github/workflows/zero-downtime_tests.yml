name: ZeroDowntime Tests
on:
  workflow_dispatch: # run integration tests only when triggered manually
    inputs:
      branch:
        description: 'Take CI build artifacts from branch (e.g., master, release-x.y.z)'
        required: true
        default: 'master'
      upgradeTo:
        description: 'Helm chart path to run upgrade command'
        required: true
        default: 'keptn-0.15.0-dev-PR-7504.tgz'
      deleteOnFinish:
        type: boolean
        required: false
        description: "Check this if you don't want the test namespaces to stay alive after the test run"
        default: false
defaults:
  run:
    shell: bash
jobs:
  calculate-queue-time:
    name: "Calculate Queue Time"
    uses: ./.github/workflows/pipeline-queuetime.yml
    with:
      workflow_name: "Zero Downtime Tests"
    secrets:
      monitoring_api_token: ${{ secrets.MONITORING_API_TOKEN }}
      monitoring_tenant_url: ${{ secrets.MONITORING_TENANT_URL }}